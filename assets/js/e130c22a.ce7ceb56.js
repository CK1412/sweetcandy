"use strict";(self.webpackChunksweetcandy=self.webpackChunksweetcandy||[]).push([[1184],{7870:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>h,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var t=i(5893),s=i(1151);const l={sidebar_position:5,title:"FCM"},c="Firebase Cloud Messaging (FCM)",r={id:"flutter_dart/fcm/index",title:"FCM",description:"- Fcm l\xe0 d\u1ecbch v\u1ee5 push notification mi\u1ec5n ph\xed c\u1ee7a Firebase, cho ph\xe9p g\u1eedi th\xf4ng b\xe1o t\u1eeb server \u0111\u1ebfn",source:"@site/docs/flutter_dart/fcm/index.md",sourceDirName:"flutter_dart/fcm",slug:"/flutter_dart/fcm/",permalink:"/sweetcandy/docs/flutter_dart/fcm/",draft:!1,unlisted:!1,editUrl:"https://github.com/CK1412/sweetcandy/tree/main/docs/flutter_dart/fcm/index.md",tags:[],version:"current",lastUpdatedBy:"canhth",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"FCM"},sidebar:"flutterDart",previous:{title:"Builder",permalink:"/sweetcandy/docs/flutter_dart/design_pattern/creational_pattern/builder_pattern"},next:{title:"Code",permalink:"/sweetcandy/docs/flutter_dart/fcm/code"}},h={},d=[{value:"C\u01a1 ch\u1ebf ho\u1ea1t \u0111\u1ed9ng",id:"c\u01a1-ch\u1ebf-ho\u1ea1t-\u0111\u1ed9ng",level:2},{value:"Lo\u1ea1i th\xf4ng b\xe1o",id:"lo\u1ea1i-th\xf4ng-b\xe1o",level:2},{value:"C\xe1c th\xe0nh ph\u1ea7n ch\xednh",id:"c\xe1c-th\xe0nh-ph\u1ea7n-ch\xednh",level:2},{value:"Y\xeau c\u1ea7u",id:"y\xeau-c\u1ea7u",level:2},{value:"Quy\u1ec1n",id:"quy\u1ec1n",level:3},{value:"G\u1eedi th\xf4ng b\xe1o",id:"g\u1eedi-th\xf4ng-b\xe1o",level:3},{value:"L\u01b0u \xfd",id:"l\u01b0u-\xfd",level:2},{value:"T\xe0i li\u1ec7u",id:"t\xe0i-li\u1ec7u",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.h1,{id:"firebase-cloud-messaging-fcm",children:["Firebase Cloud Messaging (",(0,t.jsx)(e.a,{href:"https://firebase.google.com/docs/cloud-messaging?hl=vi",children:"FCM"}),")"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Fcm l\xe0 d\u1ecbch v\u1ee5 push notification mi\u1ec5n ph\xed c\u1ee7a Firebase, cho ph\xe9p g\u1eedi th\xf4ng b\xe1o t\u1eeb server \u0111\u1ebfn\nAndroid, IOS v\xe0 Web."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"c\u01a1-ch\u1ebf-ho\u1ea1t-\u0111\u1ed9ng",children:"C\u01a1 ch\u1ebf ho\u1ea1t \u0111\u1ed9ng"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"App l\u1ea5y FCM registration Token -> FirebaseMessaging.instance.getToken()."}),"\n",(0,t.jsx)(e.li,{children:"G\u1eedi FCM token l\xean server. -> Server l\u01b0u token \u0111\u1ec3 g\u1eedi th\xf4ng b\xe1o sau n\xe0y."}),"\n",(0,t.jsx)(e.li,{children:"Server g\u1eedi th\xf4ng b\xe1o qua Firebase -> Firebase g\u1eedi \u0111\u1ebfn thi\u1ebft b\u1ecb d\u1ef1a v\xe0o token."}),"\n",(0,t.jsx)(e.li,{children:"App nh\u1eadn v\xe0 hi\u1ec3n th\u1ecb th\xf4ng b\xe1o."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"lo\u1ea1i-th\xf4ng-b\xe1o",children:"Lo\u1ea1i th\xf4ng b\xe1o"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Notification Message -> Firebase t\u1ef1 x\u1eed l\xfd hi\u1ec3n th\u1ecb khi app \u1edf background/terminated."}),"\n",(0,t.jsx)(e.li,{children:"Data Message -> App t\u1ef1 x\u1eed l\xfd, nh\u1eadn trong foreground/background."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"c\xe1c-th\xe0nh-ph\u1ea7n-ch\xednh",children:"C\xe1c th\xe0nh ph\u1ea7n ch\xednh"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"FCM Token \u2192 M\u1ed7i thi\u1ebft b\u1ecb c\xf3 m\u1ed9t token duy nh\u1ea5t."}),"\n",(0,t.jsx)(e.li,{children:"Topic Messaging \u2192 G\u1eedi \u0111\u1ebfn nh\xf3m thi\u1ebft b\u1ecb (/topics/news)."}),"\n",(0,t.jsx)(e.li,{children:"Device Group Messaging \u2192 G\u1eedi \u0111\u1ebfn nhi\u1ec1u thi\u1ebft b\u1ecb c\u1ee7a m\u1ed9t user."}),"\n",(0,t.jsx)(e.li,{children:"Condition Messaging \u2192 G\u1eedi theo \u0111i\u1ec1u ki\u1ec7n ('topic1' in topics && 'topic2' in topics)."}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"y\xeau-c\u1ea7u",children:"Y\xeau c\u1ea7u"}),"\n",(0,t.jsx)(e.h3,{id:"quy\u1ec1n",children:"Quy\u1ec1n"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Tr\xean Android"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'\n<manifest>\n   \x3c!--   Android 13 (API 33) tr\u1edf l\xean--\x3e\n   <uses-permission android:name="android.permission.POST_NOTIFICATIONS" />\n\n   \x3c!--   Khi mu\u1ed1n t\u1ef1 x\u1eed l\xfd data message \u1edf background ho\u1eb7c terminated--\x3e\n   \x3c!--   N\u1ebfu payload ch\u1ec9 ch\u1ee9a data, Firebase kh\xf4ng t\u1ef1 hi\u1ec3n th\u1ecb th\xf4ng b\xe1o.--\x3e\n   <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />\n</manifest>\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Tr\xean IOS","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"T\u1eeb IOS 15 tr\u1edf \u0111i kh\xf4ng c\u1ea7n khai b\xe1o quy\u1ec1n th\xf4ng b\xe1o trong m\xe3."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"g\u1eedi-th\xf4ng-b\xe1o",children:"G\u1eedi th\xf4ng b\xe1o"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["FCM tr\xean iOS y\xeau c\u1ea7u Apple Push Notification service (APNs) n\xean c\u1ea7n ph\u1ea3i c\xf3 t\xe0i kho\u1ea3n Apple\nDeveloper \u0111\u1ec3 t\u1ea1o v\xe0 g\u1eedi APNs Key (\u0111\u1ecbnh d\u1ea1ng ",(0,t.jsx)(e.code,{children:".p8"}),") l\xean Firebase."]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"l\u01b0u-\xfd",children:"L\u01b0u \xfd"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Hi\u1ec3n th\u1ecb th\xf4ng b\xe1o"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["FCM s\u1ebd t\u1ef1 \u0111\u1ed9ng hi\u1ec3n th\u1ecb th\xf4ng b\xe1o khi app \u1edf background/terminated v\xe0 Payload c\xf3 ch\u1ee9a\n",(0,t.jsx)(e.code,{children:"notification"}),", c\xf3 th\u1ec3 tu\u1ef3 ch\u1ec9nh n\u1ebfu mu\u1ed1n. Tr\xean iOS, \u0111\u1ea3m b\u1ea3o app \u0111\xe3 y\xeau c\u1ea7u quy\u1ec1n th\xf4ng b\xe1o."]}),"\n",(0,t.jsx)(e.li,{children:"N\u1ebfu mu\u1ed1n hi\u1ec3n th\u1ecb trong foreground, c\u1ea7n custom UI (Dialog, Snackbar, Toast...) ho\u1eb7c d\xf9ng\nflutter_local_notifications."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Th\xf4ng tin c\u1ea7n g\u1eedi l\xean Server \u0111\u1ec3 thi\u1ebft l\u1eadp th\xf4ng b\xe1o."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"G\u1eedi l\xean server c\xe1c th\xf4ng tin: deviceId v\xe0 fcmToken."}),"\n",(0,t.jsxs)(e.li,{children:["deviceId:","\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"gi\xfap server qu\u1ea3n l\xfd thi\u1ebft b\u1ecb v\xe0 c\u1eadp nh\u1eadt token."}),"\n",(0,t.jsx)(e.li,{children:"h\u1ed7 tr\u1ee3 \u0111\u0103ng xu\u1ea5t v\xe0 ch\u1eb7n thi\u1ebft b\u1ecb spam."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"L\u1ea5y FCM Token"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Kh\xf4ng c\u1ea7n quy\u1ec1n th\xf4ng b\xe1o \u0111\u1ec3 l\u1ea5y FCM Token."}),"\n",(0,t.jsx)(e.li,{children:"B\u1eaft bu\u1ed9c xin quy\u1ec1n th\xf4ng b\xe1o m\u1edbi nh\u1eadn \u0111\u01b0\u1ee3c APN Token."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Th\u1eddi h\u1ea1n c\u1ee7a FCM Token"}),"\n",(0,t.jsx)(e.p,{children:"FCM Token thay \u0111\u1ed5i khi:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u1ee8ng d\u1ee5ng \u0111\u01b0\u1ee3c kh\xf4i ph\u1ee5c tr\xean thi\u1ebft b\u1ecb m\u1edbi."}),"\n",(0,t.jsx)(e.li,{children:"Ng\u01b0\u1eddi d\xf9ng g\u1ee1 c\xe0i \u0111\u1eb7t ho\u1eb7c c\xe0i \u0111\u1eb7t l\u1ea1i \u1ee9ng d\u1ee5ng."}),"\n",(0,t.jsx)(e.li,{children:"Ng\u01b0\u1eddi d\xf9ng xo\xe1 d\u1eef li\u1ec7u \u1ee9ng d\u1ee5ng."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"t\xe0i-li\u1ec7u",children:"T\xe0i li\u1ec7u"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://firebase.google.com/docs/cloud-messaging",children:"https://firebase.google.com/docs/cloud-messaging"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://firebase.flutter.dev/docs/messaging/overview",children:"https://firebase.flutter.dev/docs/messaging/overview"})}),"\n"]})]})}function a(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(o,{...n})}):o(n)}},1151:(n,e,i)=>{i.d(e,{Z:()=>r,a:()=>c});var t=i(7294);const s={},l=t.createContext(s);function c(n){const e=t.useContext(l);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),t.createElement(l.Provider,{value:e},n.children)}}}]);