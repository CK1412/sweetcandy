"use strict";(self.webpackChunksweetcandy=self.webpackChunksweetcandy||[]).push([[6454],{6225:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>c});var r=i(5893),l=i(1151);const s={sidebar_position:1,title:"Publish Android library"},a=void 0,t={id:"android/android_library/publish_android_library",title:"Publish Android library",description:"Gi\u1edbi thi\u1ec7u",source:"@site/docs/android/android_library/publish_android_library.mdx",sourceDirName:"android/android_library",slug:"/android/android_library/publish_android_library",permalink:"/sweetcandy/en/docs/android/android_library/publish_android_library",draft:!1,unlisted:!1,editUrl:"https://github.com/CK1412/sweetcandy/tree/main/docs/android/android_library/publish_android_library.mdx",tags:[],version:"current",lastUpdatedBy:"canhth",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Publish Android library"},sidebar:"android",previous:{title:"About Android",permalink:"/sweetcandy/en/docs/android/android_library/"}},o={},c=[{value:"Gi\u1edbi thi\u1ec7u",id:"gi\u1edbi-thi\u1ec7u",level:2},{value:"H\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1c b\u01b0\u1edbc publish",id:"h\u01b0\u1edbng-d\u1eabn-chi-ti\u1ebft-c\xe1c-b\u01b0\u1edbc-publish",level:2},{value:"B\u01b0\u1edbc 1: C\u1ea5u h\xecnh ENV",id:"b\u01b0\u1edbc-1-c\u1ea5u-h\xecnh-env",level:3},{value:"B\u01b0\u1edbc 2: T\u1ea1o file publish",id:"b\u01b0\u1edbc-2-t\u1ea1o-file-publish",level:3},{value:"B\u01b0\u1edbc 3: \xc1p d\u1ee5ng c\u1ea5u h\xecnh publish",id:"b\u01b0\u1edbc-3-\xe1p-d\u1ee5ng-c\u1ea5u-h\xecnh-publish",level:3},{value:"B\u01b0\u1edbc 4: (Tu\u1ef3 ch\u1ecdn) T\u1ea1o task shortcut",id:"b\u01b0\u1edbc-4-tu\u1ef3-ch\u1ecdn-t\u1ea1o-task-shortcut",level:3},{value:"B\u01b0\u1edbc 5: Run publish",id:"b\u01b0\u1edbc-5-run-publish",level:3},{value:"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng Packages \u0111\xe3 publish",id:"h\u01b0\u1edbng-d\u1eabn-s\u1eed-d\u1ee5ng-packages-\u0111\xe3-publish",level:2}];function u(n){const e={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"gi\u1edbi-thi\u1ec7u",children:"Gi\u1edbi thi\u1ec7u"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"H\u01b0\u1edbng d\u1eabn c\xe1ch xu\u1ea5t b\u1ea3n th\u01b0 vi\u1ec7n Android Kotlin ri\xeang t\u01b0 s\u1eed d\u1ee5ng Github Packages."}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"h\u01b0\u1edbng-d\u1eabn-chi-ti\u1ebft-c\xe1c-b\u01b0\u1edbc-publish",children:"H\u01b0\u1edbng d\u1eabn chi ti\u1ebft c\xe1c b\u01b0\u1edbc publish"}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"Trong h\u01b0\u1edbng d\u1eabn n\xe0y ch\xfang t\xf4i s\u1ebd t\xe1ch c\u1ea5u h\xecnh publish ra file ri\xeang"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"b\u01b0\u1edbc-1-c\u1ea5u-h\xecnh-env",children:"B\u01b0\u1edbc 1: C\u1ea5u h\xecnh ENV"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["T\u1ea1o file ",(0,r.jsx)(e.code,{children:"github.properties"})," trong th\u01b0 m\u1ee5c root project v\u1edbi n\u1ed9i dung"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-properties",children:"gpr.usr=[Github-username'\ngpr.key=[PAT of Github v\u1edbi permission write packages]\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Th\xeam file v\u1eeba t\u1ea1o v\xe0o .gitignore trong th\u01b0 m\u1ee5c root project"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"github.properties\n"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Ch\u1ea1y l\u1ec7nh \u0111\u1ec3 clear cache git"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"git rm -r --cached .\n"})}),"\n",(0,r.jsx)(e.h3,{id:"b\u01b0\u1edbc-2-t\u1ea1o-file-publish",children:"B\u01b0\u1edbc 2: T\u1ea1o file publish"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["T\u1ea1o file ",(0,r.jsx)(e.code,{children:"publish-github-packages.gradle.kts"})," trong th\u01b0 m\u1ee5c root library v\u1edbi n\u1ed9i dung"]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-kotlin",metastring:'title="publish-github-packages.gradle.kts"',children:'import java.io.FileInputStream\nimport java.util.Properties\nimport org.gradle.api.publish.PublishingExtension\n\napply(plugin = "maven-publish")\nval githubProperties = Properties()\ngithubProperties.load(FileInputStream(rootProject.file("github.properties")))\n\nval libraryGroupId = "[com.yourcompany]"\nval libraryArtifactId = "[your-library-name]"\nval libraryVersion = "1.0.0"\nval libraryName = "[Your Library Name]"\nval libraryDescription = "[Description of your library]"\nval libraryUrl = "[https://github.com/yourusername/your-source-repo]"\nval githubPublishRepo =\n    "[your-publish-repo]" // T\xean repo tr\xean github d\xf9ng \u0111\u1ec3 ch\u01b0a packages \u0111\xe3 publish\nval githubUsername = "[your Github username]"\n\nconfigure<PublishingExtension> {\n    publications {\n        val PublicationName = "release"\n        create<MavenPublication>(PublicationName) {\n            groupId = libraryGroupId\n            artifactId = libraryArtifactId\n            version = libraryVersion\n\n            afterEvaluate {\n                from(components["release"]) // Map v\u1edbi Android release variant\n            }\n\n            pom {\n                name.set(libraryName)\n                description.set(libraryDescription)\n                url.set(libraryUrl)\n\n                // (Tu\u1ef3 ch\u1ec9nh) Th\xeam license n\u1ebfu mu\u1ed1n\n                licenses {\n                    license {\n                        name.set("The Apache License, Version 2.0")\n                        url.set("http://www.apache.org/licenses/LICENSE-2.0.txt")\n                    }\n                }\n\n                // (Tu\u1ef3 ch\u1ec9nh) Th\xeam developer n\u1ebfu mu\u1ed1n\n                developers {\n                    developer {\n                        id.set("yourusername") // Github username\n                        name.set("Your Name") // H\u1ecd t\xean\n                        email.set("your.email@example.com") // Email\n                    }\n                }\n            }\n        }\n    }\n\n    repositories {\n        maven {\n            name = "GitHubPackages"\n            url = uri("https://maven.pkg.github.com/$githubUsername/$githubPublishRepo")\n            credentials {\n                username = githubProperties.get("gpr.usr") as String? ?: System.getenv("GPR_USER")\n                password =\n                    githubProperties.get("gpr.key") as String? ?: System.getenv("GPR_API_KEY")\n            }\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"b\u01b0\u1edbc-3-\xe1p-d\u1ee5ng-c\u1ea5u-h\xecnh-publish",children:"B\u01b0\u1edbc 3: \xc1p d\u1ee5ng c\u1ea5u h\xecnh publish"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"C\u1ea5u h\xecnh build.gradle.kts ch\xednh (module level)"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-kotlin",metastring:'title="build.gradle.kts" (module level)',children:'// Apply file publish\napply {\n    from("publish-github-packages.gradle.kts")\n}\n\nplugins {\n    id("com.android.library")\n    id("org.jetbrains.kotlin.android")\n    // KH\xd4NG c\u1ea7n apply maven-publish \u1edf \u0111\xe2y n\u1eefa\n}\n\nandroid {\n    // ...\n\n    publishing {\n        singleVariant("release") {\n            withSourcesJar()\n            withJavadocJar()\n        }\n    }\n}\n\n'})}),"\n",(0,r.jsx)(e.h3,{id:"b\u01b0\u1edbc-4-tu\u1ef3-ch\u1ecdn-t\u1ea1o-task-shortcut",children:"B\u01b0\u1edbc 4: (Tu\u1ef3 ch\u1ecdn) T\u1ea1o task shortcut"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Th\xeam v\xe0o build.gradle.kts (project level):"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-kotlin",children:'tasks.register("publishAllToGitHub") {\n    description = "Publishes the library modules to GitHub Packages"\n    group = "publishing"\n\n    subprojects {\n        if (plugins.hasPlugin("com.android.library")) {\n            // Format: publish[PublicationName]PublicationTo[RepositoryName]Repository\n            // PublicationName = Release -> l\u1ea5y t\u1eeb config trong publish-github-packages.gradle.kts\n            // RepositoryName = GitHubPackages -> l\u1ea5y t\u1eeb config trong publish-github-packages.gradle.kts\n            dependsOn("${path}:publishReleasePublicationToGitHubPackagesRepository")\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"b\u01b0\u1edbc-5-run-publish",children:"B\u01b0\u1edbc 5: Run publish"}),"\n",(0,r.jsx)(e.p,{children:"Publish module c\u1ee5 th\u1ec3"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"./gradlew :your-module:publishReleasePublicationToGitHubPackagesRepository\n"})}),"\n",(0,r.jsx)(e.p,{children:"Ho\u1eb7c d\xf9ng task shortcut (n\u1ebfu c\xf3 - \u1edf b\u01b0\u1edbc 4)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-shell",children:"./gradlew publishAllToGitHub\n"})}),"\n",(0,r.jsx)(e.h2,{id:"h\u01b0\u1edbng-d\u1eabn-s\u1eed-d\u1ee5ng-packages-\u0111\xe3-publish",children:"H\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng Packages \u0111\xe3 publish"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-kotlin",metastring:'title="settings.gradle.kts" (project level)',children:'repositories {\n    maven {\n        name = "GitHubPackages"\n        url = uri("https://maven.pkg.github.com/yourusername/my-android-packages")\n        credentials {\n            username = "provided_username" // C\xf3 th\u1ec3 \u0111\u1eb7t t\xean b\u1ea5t k\u1ef3, v\xed d\u1ee5 "Private"\n            password = "provided_token" // PAT c\u1ee7a Github v\u1edbi quy\u1ec1n read packages\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-kotlin",metastring:'title="build.gradle.kts" (module level)',children:'dependencies {\n    implementation("com.yourcompany:your-library-name:1.0.0")\n}\n'})})]})}function d(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(u,{...n})}):u(n)}},1151:(n,e,i)=>{i.d(e,{Z:()=>t,a:()=>a});var r=i(7294);const l={},s=r.createContext(l);function a(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:a(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);